{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Application Credentials",
  "description": "Authentication credentials for external services. Supports both user credentials (stored in browser) and system credentials (loaded from environment variables).",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "title": "Schema Version",
      "description": "Version of the credentials schema",
      "default": "1.0.0"
    },
    "git": {
      "type": "array",
      "title": "Git Repository Credentials",
      "description": "Authentication credentials for Git repositories",
      "items": {
        "type": "object",
        "title": "Git Repository Credential",
        "properties": {
          "name": {
            "type": "string",
            "title": "Repository Name",
            "description": "Unique identifier and repository name on GitHub (e.g., 'nous-conversion', 'dagnet')"
          },
          "isDefault": {
            "type": "boolean",
            "title": "Default Repository",
            "description": "Mark this as the default repository to load on startup",
            "default": false
          },
          "owner": {
            "type": "string",
            "title": "GitHub Owner",
            "description": "GitHub username or organization name"
          },
          "userName": {
            "type": "string",
            "title": "User Name",
            "description": "Display name for file authorship (used in metadata.author field)",
            "minLength": 2,
            "maxLength": 64
          },
          "token": {
            "type": "string",
            "title": "GitHub Token",
            "description": "Personal access token for GitHub API",
            "format": "password"
          },
          "basePath": {
            "type": "string",
            "title": "Base Path",
            "description": "Optional prefix for directory structure (e.g., 'param-registry' for nested repos)",
            "default": ""
          },
          "branch": {
            "type": "string",
            "title": "Default Branch",
            "description": "Default branch to use for operations",
            "default": "main"
          },
          "graphsPath": {
            "type": "string",
            "title": "Graphs Directory Path",
            "description": "Path to the graphs directory in the repository",
            "default": "graphs"
          },
          "paramsPath": {
            "type": "string",
            "title": "Parameters Directory Path",
            "description": "Path to the parameters directory in the repository",
            "default": "parameters"
          },
          "contextsPath": {
            "type": "string",
            "title": "Contexts Directory Path",
            "description": "Path to the contexts directory in the repository",
            "default": "contexts"
          },
          "casesPath": {
            "type": "string",
            "title": "Cases Directory Path",
            "description": "Path to the cases directory in the repository",
            "default": "cases"
          },
          "nodesPath": {
            "type": "string",
            "title": "Nodes Directory Path",
            "description": "Path to the nodes directory in the repository",
            "default": "nodes"
          },
          "eventsPath": {
            "type": "string",
            "title": "Events Directory Path",
            "description": "Path to the events directory in the repository",
            "default": "events"
          }
        },
        "required": ["name", "owner"],
        "additionalProperties": false
      }
    },
    "providers": {
      "type": "object",
      "title": "Data Source Provider Credentials",
      "description": "Generic credentials for external data providers. Keys match 'credsRef' in connections.yaml. Each provider can have arbitrary credential fields.",
      "additionalProperties": {
        "type": "object",
        "description": "Credential object for a specific provider (e.g., amplitude, google-sheets, statsig). Structure is provider-specific.",
        "additionalProperties": true
      },
      "examples": [
        {
          "amplitude": {
            "api_key": "your_api_key",
            "secret_key": "your_secret_key"
          },
          "google-sheets": {
            "service_account_json_b64": "base64_encoded_service_account_json"
          },
          "statsig": {
            "console_api_key": "console-..."
          },
          "postgres-analytics": {
            "host": "db.example.com",
            "port": 5432,
            "database": "analytics",
            "username": "readonly",
            "password": "secret"
          }
        }
      ]
    },
    "statsig": {
      "type": "object",
      "title": "[DEPRECATED] Statsig Credentials",
      "description": "Legacy credentials format. Use 'providers.statsig' instead.",
      "properties": {
        "token": {
          "type": "string",
          "title": "Statsig API Key",
          "description": "Console API key for Statsig (full CRUD operations)",
          "format": "password"
        }
      },
      "additionalProperties": false
    },
    "googleSheets": {
      "type": "object",
      "title": "[DEPRECATED] Google Sheets Credentials",
      "description": "Legacy credentials format. Use 'providers.google-sheets' instead.",
      "properties": {
        "token": {
          "type": "string",
          "title": "Google OAuth Token",
          "description": "OAuth access token for Google Sheets API",
          "format": "password"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["git"],
  "additionalProperties": false
}