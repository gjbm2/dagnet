# DAGNet Glossary: Statistical & Graph Terms

**Status:** Draft  
**Audience:** DAGNet users (product, ops, data, engineering)  

This glossary explains common terms used in DAGNet’s **conversion graphs**, **latency modelling**, and **analytics**.  
It is deliberately plain‑spoken and avoids heavy maths wherever possible.

---

## Graph & DAG Concepts

**DAG (Directed Acyclic Graph)**  
A graph made of **nodes** (states) and **directed edges** (transitions) with **no cycles**.  
In DAGNet, nodes are funnel stages (e.g. “Household Created”), edges are conversion steps (“Created → Switch Registered”).

**Node**  
A state a user or entity can be in (e.g. “Account Created”, “Switch Success”).

**Edge**  
A directed transition from one node to another (e.g. A→B).  
In DAGNet, edges have a probability \(p\) and, for latency, a **time‑to‑convert** distribution.

**Case**
An experimental scenario with one or more **variants** -- likely to be driven by Statsig.

**Event**
An event generated by the system and stored in Segment, which we retrieve into the graph -- typically via Amplitude.

**Path**  
A sequence of edges through the graph (e.g. A→X→Y). Used when we talk about path‑level latency or forecasted flow.

**Scenario**  
A named set of parameters overlaid on the base graph (e.g. different p, costs, or latency assumptions).  
Scenarios let you compare “what if we improve this edge?” without changing the underlying DAG.

---

## Interface & Workspace

**Navigator**
The file explorer panel on the left side of the application. It allows you to browse repositories, branches, and files (graphs, parameters, contexts, cases).

**Canvas**
The main editing area where you visualize and interact with the graph nodes and edges.

**Properties Panel**
The panel on the right sidebar where you view and edit details of the currently selected node or edge, such as names, descriptions, probabilities, and costs.

**What-If Panel**
The panel used to manage scenarios, set overrides, and perform "what-if" analysis.

**Quick Runner / Path Analysis**
An interactive tool triggered by selecting nodes (Command/Ctrl+Click). It calculates probabilities, costs, and flow through the specific selected path, applying any active scenarios first.

**Lightning Menu**
A context-sensitive quick action menu that appears when dragging from a node or edge handle, allowing rapid creation of new nodes or connections.

**Workspace**
The local state of your repository stored in the browser (IndexedDB). Changes here must be **committed** to be saved to the remote Git repository.

**Dirty State**
Indicates that a file or the workspace has unsaved changes. Usually represented by a dot or an asterisk next to the file name.

**Commit**
The action of saving your local changes to the Git repository.

**Sync (Pull/Push)**
Updating your local workspace with changes from the remote repository (Pull) or sending your committed changes to the remote repository (Push).

---

## Graph Elements & Types

**Case Node**
A special node type representing an experiment or decision point with multiple distinct variants (e.g., "Control" vs. "Treatment").

**Start Node**
A node marked as an entry point to the graph. Flow calculations begin here.

**Absorbing Node**
A terminal node from which there are no outgoing edges. Often represents a final state like "Success", "Failure", or "Drop".

**Outcome Type**
A classification for terminal nodes, such as `success`, `failure`, `error`, `neutral`, or `other`. This helps in aggregating results during analysis.

**Port / Handle**
The connection points on a node where edges can be attached. Input handles are usually on the left/top, and output handles on the right/bottom.

---

## Scenarios & What-If Analysis

**Base Layer**
The original set of parameter values defined in the graph files, before any scenarios are applied.

**Overlay**
A set of parameter overrides that sits on top of the base layer. Scenarios are essentially named overlays.

**Current Layer**
The live, working state of the graph in the editor. It is the result of composing the Base Layer + all active Scenario Overlays + any unsaved manual adjustments.

**Flatten**
The action of merging the "Current" state down into the "Base" layer, effectively making the current scenario the new default.

**Snapshot**
Saving the current parameter state as a new scenario.
- **Full Snapshot**: Saves all parameters.
- **Diff Snapshot**: Saves only the parameters that differ from the baseline.

**HRN (Human Readable Name)**
The text-based key used to identify parameters in scenarios and overrides (e.g., `e.checkout-to-purchase.p.mean`).

**Conditional Probability (Hyperprior)**
A probability that changes based on the path taken. For example, "The conversion rate from B→C is 20% normally, but 50% if the user previously visited node A".

**Pruning**
The process of temporarily removing impossible or unselected paths during analysis. For example, if you select "What if: Visited Node A", paths that do not go through Node A are pruned.

**Renormalization**
Adjusting the probabilities of remaining paths after pruning so that they still sum to 100% (or the appropriate total) relative to the new context.

---

## Data & Querying

**Query DSL**
A domain-specific language used to define conditions and fetch data.
Examples:
- `visited(node_name)`: True if the user passed through `node_name`.
- `from(node_a).to(node_b)`: Specifies data strictly for the transition between A and B.
- `context(device:mobile)`: Filters for specific user segments.

**Cache cutting**  
The process of splitting a requested window into **already-cached** dates vs **missing** dates, so we only fetch what’s needed (dependency‑scoped, partial cache invalidation).

**Cohort horizon (retrieval horizon)**  
The effective look-back limit for `cohort()` retrieval. DAGNet uses `path_t95` to avoid refetching cohorts that are far older than the conversion horizon (unless explicitly required).

**Context**
Definitions of user segments or environmental factors (e.g., "Mobile Users", "UK Region") that can filter data or trigger different parameter values.

**Evidence**
The actual observed data (n/k values, raw event counts) that backs up a modelled probability or cost.

**Parameter**
A variable in the graph that controls flow or value.
- **Probability (p)**: Chance of taking an edge.
- **Cost**: Monetary value associated with an edge/node.
- **Time**: Latency or duration associated with an edge.

---

## Probability & Evidence

**n / k (sample size / successes)**  
For a given edge, **n** is how many users were exposed to the step, **k** is how many completed it.  
The empirical conversion rate is \( p \approx k/n \).

**p (edge probability)**  
The modelled probability that a user takes this edge, often inferred from n/k plus prior assumptions.

**Prior**  
An assumption about p or latency **before** seeing current data (e.g. “we think this edge is ~10% likely”).  
Useful when current data is thin or noisy.

---

## Latency, Survival & Time‑to‑Convert

**Latency (lag)**  
The **time delay** between entering a step and completing it.  
Example: 7 days from “Household Created” to “Switch Registered”.

**Anchor lag (A→X lag)**  
For a downstream latency edge, the **observed time from the graph anchor (A) to the source node (X)**.  
In cohort mode this comes from the `anchor_*` latency arrays returned by Amplitude’s 3-step funnel and is used to adjust “effective cohort age”.

**Time‑to‑convert distribution**  
How long it typically takes users to complete a step, treated as a probability distribution over time (e.g. log‑normal).  
This is what we infer from daily Amplitude data.

**Survival analysis / survival curve**  
A way of modelling how a cohort “completes” over time.  
The survival curve answers: “What fraction have converted by day t?”.

**Hazard rate**  
The instantaneous chance of converting **at** time t, given the user has not yet converted.  
Informally: “how spiky is the step at this point in time?”.

**Censoring**  
We stop observing a cohort after some time, so we do not see all of its eventual conversions.  
Example: querying “last 7 days” for a 30‑day lag step means many users are still “in flight” (right‑censored data).

**Mature vs immature cohorts**  
Informal distinction based on cohort **age** versus typical lag:  
- **Mature**: cohorts that are old enough that most conversions should already have happened.  
- **Immature**: cohorts that are still in the early part of the lag curve.

**Completeness (maturity coverage)**  
A 0–1 measure of “how far along” a set of cohorts is, based on lag distributions and ages at query time.  
Rendered visually as solid vs hatched portions of an edge.

**t95**  
The 95th percentile time-to-convert for an edge’s lag distribution.  
Interpretation: “95% of eventual converters should convert within t95 days.”

**path_t95**  
An **anchor-to-edge** conversion horizon used to bound `cohort()` retrieval windows (to avoid fetching cohorts that are far older than the conversion horizon).  
When anchor lag arrays are available, DAGNet prefers a moment-matched estimate \(t95(A→X + X→Y)\); otherwise it falls back to a conservative topo accumulation.

**maturity_days**  
A user-configured fallback for lag/time-to-convert when empirical lag data is missing or too noisy.  
Also used as a conservative fallback when computing t95.

---

## Distributions & Transformations

**Normal distribution**  
The classic “bell curve”. Often too simplistic for time‑to‑convert, but appears in priors and approximations.

**Log‑normal distribution**  
A distribution where **log(time)** is normal. Common for **positive, skewed** quantities like time‑to‑convert.

**Gamma / Weibull distributions**  
Flexible families used for modelling waiting times and survival curves.  
Useful when the lag has heavy tails or changing hazard rates.

**Logit / logits**  
The log‑odds transform of a probability p:  
\( \text{logit}(p) = \log\big(p / (1 - p)\big) \).  
Handy for modelling probabilities on an unconstrained scale.

**Convolution (in this context)**  
Combining an **arrival curve** with a **lag distribution** to get a new time‑indexed flow.  
Example: if 100 users arrive at node A on day 0 and the A→B lag has a known pmf, convolution tells us how many arrive at B on days 1, 2, 3, … .

**Moment matching (lognormal sum)**  
An approximation technique used to represent the sum of two log-normal variables as another log-normal by matching mean and variance (often called the Fenton–Wilkinson approximation).  
In DAGNet this is used to estimate `path_t95` from anchor lag (A→X) plus edge lag (X→Y) when both are available.

---

## Bayesian Terms (for later phases)

**Bayes / Bayesian inference**  
Updating beliefs (a distribution over parameters) as new data arrives.  
“Prior” + “likelihood from data” → **posterior** distribution.

**Posterior**  
What we believe about a parameter after seeing data (e.g. distribution over p, or over median lag).

**Alpha / beta (for Beta distribution)**  
Shape parameters for the **Beta** distribution, a standard choice for modelling probabilities.  
Roughly, alpha ≈ “successes + 1”, beta ≈ “failures + 1”.

**Credible interval**  
Bayesian analogue of a confidence interval.  
Example: “there is a 90% posterior probability that the median lag lies between 4 and 9 days”.

---

## Cohorts, Windows & Queries

**Event window (`window()`)**  
Date range where we look at **events that happened during that time** (e.g. “events in the last 7 days”).  
Good for volume questions; not always good for lagged conversion evidence.

**Cohort window (`cohort()`)**  
Date range where we look at **users who entered the funnel during that time**, and track their conversions over time.  
Essential for latency and partial‑cohort forecasting.

**Cohort (entry cohort)**  
All users who hit a chosen **anchor event** on a specific date (e.g. all households created on 1‑Sep‑25).  
We observe their conversions as a function of time since that anchor.

**Anchor event**  
The event used to define cohort entry (often the first meaningful node in a funnel).  
All time‑to‑convert measurements are relative to this anchor.

---

## DAGNet‑Specific UI Terms (Latency)

**Edge bead**  
A small visual marker on an edge that surfaces key stats (e.g. p, cost, lag).  
Latency beads show typical lag and completeness for an edge.

**Mature / forecast edge layers**  
Edges can be drawn with an inner “mature” layer (solid) and an outer “forecast” layer (hatched).  
The ratio of these indicates how much of the edge’s conversions are based on **observed** data versus **modelled** projections.

**Sibling rebalancing**  
When one edge probability in a sibling group changes, DAGNet may adjust the remaining siblings so the group stays normalised (typically summing to 1) while respecting override flags.

---

If a term you see in the UI or docs is missing from this glossary, please file an issue or add a note and we’ll extend it.  
The aim is that non‑statisticians can use Dagnet without getting stuck on vocabulary.
